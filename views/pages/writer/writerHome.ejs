<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inkwell â€¢ Writer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/dist/css/writer.css">
</head>

<body>
  <div class="container-fluid p-4">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <img src="/assets/images/inkwell-writer.png" class="logo" alt="">
        <div class="ms-3 fs-5">
          <a href="/blog" class="text-decoration-none text-secondary">Reader</a> |
          <a href="/write" class="text-decoration-none fw-semibold text-white">Writer</a>
        </div>
      </div>
      <div class="d-flex align-items-center gap-3">
        <span class="text-secondary small">You have got a comment on your latest blog...</span>
        <button class="btn btn-light rounded-circle">ðŸ””</button>
        <a href="/profile"><img src="https://i.pravatar.cc/40" class="rounded-circle" alt="profile"></a>
        <form action="/logout" method="GET" class="m-0">
          <button type="submit" class="btn btn-outline-dark rounded-pill px-3 py-1 fw-semibold shadow-sm logout-btn">
            âŽ‹ Logout
          </button>
        </form>
      </div>
    </div>

    <!-- Tabs -->
    <div class="row mb-4 text-center">
      <div class="col-3">
        <div class="tab-box active">Works</div>
      </div>
      <div class="col-3">
        <div class="tab-box">Drafts</div>
      </div>
      <div class="col-3">
        <div class="tab-box">Status</div>
      </div>
      <div class="col-3">
        <div class="tab-box">Network</div>
      </div>
    </div>

    <div class="row g-3">
      <!-- Main content -->
      <div class="col-lg-8">
        <!-- Jot box -->
        <div class="card p-4 mb-3 shadow-sm jot-box">
          <form action="/posts" method="POST" enctype="multipart/form-data" class="modern-form">

            <!-- Title -->
            <div class="form-floating mb-4">
              <input type="text" class="form-control bg-dark text-white border-0 rounded-3 shadow-sm" name="title"
                id="titleInput" placeholder="Title" required>
              <label for="titleInput" class="text-secondary">Title</label>
            </div>

            <!-- Cover Image -->
            <div class="mb-4">
              <label class="form-label text-uppercase small fw-semibold text-secondary">Cover Image</label>
              <input type="file" name="cover" class="form-control bg-dark text-white border-0 rounded-3 shadow-sm"
                accept="image/*">
              <div class="form-text text-light opacity-75">JPG/PNG/WebP â€¢ Large images will be resized.</div>
            </div>

            <!-- Body -->
            <div class="form-floating mb-4">
              <textarea name="body" class="form-control bg-dark text-white border-0 rounded-3 shadow-sm" id="bodyInput"
                rows="10" placeholder="Write your story..." style="height: 250px;" required></textarea>
              <label for="bodyInput" class="text-secondary">Body</label>
            </div>

            <!-- Submit -->
            <div class="text-end">
              <button class="btn btn-light fw-semibold px-5 py-2 rounded-pill shadow">âœ’ Publish</button>
            </div>
          </form>
        </div>


        <!-- Recent Publishes -->
        <h5 class="mb-3">Recent Publishes</h5>
        <div class="row g-3">
          <% if (posts && posts.length> 0) { %>
            <% posts.forEach(p=> { %>
              <div class="col-md-3">
                <a href="/posts/<%= p._id %>/edit" class="card-clean text-decoration-none text-white">
                  <div class="thumb small">
                    <img src="<%= p.coverUrl || 'https://placehold.co/200x200' %>" alt="">
                    <div class="overlay">
                      <h6>
                        <%= p.title %>
                      </h6>
                      <small>
                        <%= user.username %>
                      </small>
                    </div>
                  </div>
                </a>
              </div>
              <% }) %>
                <% } else { %>
                  <p class="text-secondary">No posts published yet.</p>
                  <% } %>
        </div>



      </div>
      <div class="col-lg-4">
        <div class="card p-3 mb-3 shadow-sm profile-box">
          <h6>
            <%= user.username %>
          </h6>
          <small class="text-secondary">
            <%= user.role || "Writer" %>
          </small>
          <a href="/profile" class="btn btn-secondary w-100 my-3">Edit Your Profile</a>
          <div class="d-flex justify-content-between">
            <small>Published</small> <small>
              <%= posts.length %>
            </small>
          </div>
          <div class="d-flex justify-content-between">
            <small>Total views</small> <small>
              <%= Math.floor(Math.random()*5000) %>
            </small>
          </div>
          <div class="d-flex justify-content-between">
            <small>Appreciations</small> <small>
              <%= Math.floor(Math.random()*300) %>
            </small>
          </div>
          <div class="d-flex justify-content-between mb-3">
            <small>Followers</small> <small>
              <%= Math.floor(Math.random()*200) %>
            </small>
          </div>
          <div class="card p-3 text-center box-gray">
            <p class="m-0">+ Create your magazine</p>
          </div>
          <small class="text-secondary">Member since Nov 22, 2022</small>
        </div>
      </div>
    </div>
</body>

</html>